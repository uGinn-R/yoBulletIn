(function(n,t,i){"use strict";function r(n,t){this.elem=n;t=t||{};this.className=t.className||"easyeditor";this.buttons=t.buttons||["bold","italic","link","h2","h3","h4","alignleft","aligncenter","alignright"];this.buttonsHtml=t.buttonsHtml||null;this.overwriteButtonSettings=t.overwriteButtonSettings||null;this.css=t.css||null;this.onLoaded=typeof t.onLoaded=="function"?t.onLoaded:null;this.randomString=Math.random().toString(36).substring(7);this.theme=t.theme||null;this.dropdown=t.dropdown||{};this.characterLimit=t.characterLimit||null;this.characterLimitText=t.characterLimitText||null;this.characterLimitPreventKeypress=t.characterLimitPreventKeypress||!1;this.attachEvents()}r.prototype.attachEvents=function(){this.bootstrap();this.addToolbar();this.handleKeypress();this.handleResizeImage();this.utils();this.onLoaded!==null&&this.onLoaded.call(this,this);this.characterLimit&&this.enableCharacterLimit()};r.prototype.detachEvents=function(){var t=this,i=n(t.elem).closest("."+t.className+"-wrapper"),r=i.find("."+t.className+"-toolbar");r.remove();n(t.elem).removeClass(t.className).removeAttr("contenteditable").unwrap()};r.prototype.bootstrap=function(){var i=this,r=n(i.elem).prop("tagName").toLowerCase();if(r==="textarea"||r==="input"){var o=n(i.elem).attr("placeholder")||"",u=n(i.elem).css("marginTop")||0,f=n(i.elem).css("marginBottom")||0,e="";(u.length>0||f.length>0)&&(e=' style="margin-top: '+u+"; margin-bottom: "+f+'" ');n(i.elem).after('<div id="'+i.randomString+'-editor" placeholder="'+o+'">'+n(i.elem).val()+"<\/div>");n(i.elem).hide().addClass(i.randomString+"-bind");i.elem=t.getElementById(i.randomString+"-editor");n(i.elem).attr("contentEditable",!0).addClass(i.className).wrap('<div class="'+i.className+'-wrapper"'+e+"><\/div>")}else n(i.elem).attr("contentEditable",!0).addClass(i.className).wrap('<div class="'+i.className+'-wrapper"><\/div>');this.$wrapperElem=n(i.elem).parent();i.css!==null&&n(i.elem).css(i.css);this.containerClass="."+i.className+"-wrapper";typeof i.elem=="string"&&(i.elem=n(i.elem).get(0));i.theme!==null&&n(i.elem).closest(i.containerClass).addClass(i.theme)};r.prototype.handleKeypress=function(){var i=this;n(i.elem).keydown(function(n){if(n.keyCode===13&&i.isSelectionInsideElement("li")===!1)return n.preventDefault(),n.shiftKey===!0?t.execCommand("insertHTML",!1,"<br>"):t.execCommand("insertHTML",!1,"<br><br>"),!1});i.elem.addEventListener("paste",function(n){n.preventDefault();var i=n.clipboardData.getData("text/plain").replace(/\n/ig,"<br>");t.execCommand("insertHTML",!1,i)})};r.prototype.isSelectionInsideElement=function(n){var u,r;for(n=n.toUpperCase(),i.getSelection?(u=i.getSelection(),u.rangeCount>0&&(r=u.getRangeAt(0).commonAncestorContainer)):(u=t.selection)&&u.type!="Control"&&(r=u.createRange().parentElement());r;){if(r.nodeType==1&&r.tagName==n)return!0;r=r.parentNode}return!1};r.prototype.addToolbar=function(){var t=this;n(t.elem).before('<div class="'+t.className+'-toolbar"><ul><\/ul><\/div>');this.$toolbarContainer=this.$wrapperElem.find("."+t.className+"-toolbar");this.populateButtons()};r.prototype.injectButton=function(t){var i=this,f,u,r;if(i.overwriteButtonSettings!==null&&i.overwriteButtonSettings[t.buttonIdentifier]!==undefined&&(f=n.extend({},t,i.overwriteButtonSettings[t.buttonIdentifier]),t=f),i.buttonsHtml!==null&&i.buttonsHtml[t.buttonIdentifier]!==undefined&&(t.buttonHtml=i.buttonsHtml[t.buttonIdentifier]),u=t.buttonTitle?t.buttonTitle:t.buttonIdentifier.replace(/\W/g," "),t.buttonHtml&&(t.childOf!==undefined?(r=i.$toolbarContainer.find(".toolbar-"+t.childOf).parent("li"),r.find("ul").length===0&&r.append("<ul><\/ul>"),r=r.find("ul"),r.append('<li><button type="button" class="toolbar-'+t.buttonIdentifier+'" title="'+u+'">'+t.buttonHtml+"<\/button><\/li>")):i.$toolbarContainer.children("ul").append('<li><button type="button" class="toolbar-'+t.buttonIdentifier+'" title="'+u+'">'+t.buttonHtml+"<\/button><\/li>")),typeof t.clickHandler=="function")n("html").find(i.elem).closest(i.containerClass).on("click",".toolbar-"+t.buttonIdentifier,function(r){typeof t.hasChild!==undefined&&t.hasChild===!0?r.stopPropagation():r.preventDefault();t.clickHandler.call(this,this);n(i.elem).trigger("keyup")})};r.prototype.openDropdownOf=function(t){var i=this;n(i.elem).closest(i.containerClass).find(".toolbar-"+t).parent().children("ul").show()};r.prototype.populateButtons=function(){var t=this;n.each(t.buttons,function(n,i){typeof t[i]=="function"&&t[i]()})};r.prototype.handleResizeImage=function(){var i=this;n("html").on("click",i.containerClass+" figure",function(t){t.stopPropagation();n(this).addClass("is-resizable")});n("html").on("mousemove",i.containerClass+" figure.is-resizable",function(){n(this).find("img").css({width:n(this).width()+"px"})});n(t).click(function(){n(i.elem).find("figure").removeClass("is-resizable")})};r.prototype.getSelection=function(){if(i.getSelection){var n=i.getSelection();if(n.rangeCount)return n}return!1};r.prototype.removeFormatting=function(i){var r=this,l=i.inFullArea,f,o,e,u,s,h,c;if(r.isSelectionOutsideOfEditor()===!0)return!1;l===!1?(f=r.getSelection(),o=f.toString(),f&&o.length>0&&(e=f.getRangeAt(0),u=n(e.commonAncestorContainer.parentNode),u.attr("class")===r.className||u.attr("class")===r.className+"-wrapper"?(s=t.createElement("span"),n(s).attr("data-value","temp").html(o.replace(/\n/ig,"<br>")),e.deleteContents(),e.insertNode(s),n('[data-value="temp"]').contents().unwrap()):(c=!1,n.each(u.parentsUntil(r.elem),function(n,t){h=t;c=!0}),c===!0?n(h).html(n(h).text().replace(/\n/ig,"<br>")).contents().unwrap():u.contents().unwrap()))):n(r.elem).html(n(r.elem).text().replace(/\n/ig,"<br>"))};r.prototype.removeEmptyTags=function(){var t=this;n(t.elem).html(n(t.elem).html().replace(/(<(?!\/)[^>]+>)+(<\/[^>]+>)+/,""))};r.prototype.removeBlockElementFromSelection=function(i,r){var s=this,u;r=r===undefined?!1:r;u="";r===!0&&(u=", br");var e=i.getRangeAt(0),o=e.cloneContents(),f=t.createElement("temp");return n(f).html(o),n(f).find("h1, h2, h3, h4, h5, h6, p, div"+u).each(function(){n(this).replaceWith(this.childNodes)}),n(f).html()};r.prototype.wrapSelectionWithNodeName=function(i){var e=this,r,u,h,s;if(e.isSelectionOutsideOfEditor()===!0)return!1;if(r={name:"span",blockElement:!1,style:null,"class":null,attribute:null,keepHtml:!1},typeof i=="string"?r.name=i:(r.name=i.nodeName||r.name,r.blockElement=i.blockElement||r.blockElement,r.style=i.style||r.style,r.class=i.class||r.class,r.attribute=i.attribute||r.attribute,r.keepHtml=i.keepHtml||r.keepHtml),u=e.getSelection(),u&&u.toString().length>0&&u.rangeCount){var c=e.isAlreadyWrapped(u,r),f=u.getRangeAt(0).cloneRange(),o=t.createElement(r.name);(r.style!==null||r.class!==null||r.attribute!==null)&&(o=e.addAttribute(o,r));e.selectionContainsHtml(f)?(f=u.getRangeAt(0),r.keepHtml===!0?(h=f.cloneContents(),s=t.createElement("div"),s.appendChild(h),n(o).html(s.innerHTML)):o.textContent=u.toString(),f.deleteContents(),f.insertNode(o),f.commonAncestorContainer.localName===r.name&&(n(f.commonAncestorContainer).contents().unwrap(),e.removeEmptyTags())):(f.surroundContents(o),u.removeAllRanges(),u.addRange(f));c===!0&&e.removeWrappedDuplicateTag(o);e.removeEmptyTags();u.removeAllRanges()}};r.prototype.wrapSelectionWithList=function(i){var u=this,r,f;if(i=i||"ul",u.isSelectionOutsideOfEditor()===!0)return!1;if(r=u.getSelection(),r&&r.toString().length>0&&r.rangeCount){var o=u.removeBlockElementFromSelection(r,!0),s=o.split("\n").filter(function(n){return n!==""}),h=n.map(s,function(t){return"<li>"+n.trim(t)+"<\/li>"}),e=t.createElement(i);n(e).html(h);f=r.getRangeAt(0);f.deleteContents();f.insertNode(e);r.removeAllRanges()}};r.prototype.selectionContainsHtml=function(n){var t=this;return n.startContainer.parentNode.className===t.className+"-wrapper"?!1:!0};r.prototype.isAlreadyWrapped=function(t,i){var f=this,e=t.getRangeAt(0),r=n(e.commonAncestorContainer),u=!1;return r.parent().prop("tagName").toLowerCase()===i.name&&r.parent().hasClass(f.className)===!1?u=!0:i.blockElement===!0?n.each(r.parentsUntil(f.elem),function(t,i){var r=i.tagName.toLowerCase();n.inArray(r,["h1","h2","h3","h4","h5","h6"])!==-1&&(u=!0)}):n.each(r.parentsUntil(f.elem),function(n,t){var r=t.tagName.toLowerCase();r===i.name&&(u=!0)}),u};r.prototype.removeWrappedDuplicateTag=function(t){var i=this,r=t.tagName;n(t).unwrap();n(t).prop("tagName")===r&&n(t).parent().hasClass(i.className)===!1&&n(t).parent().hasClass(i.className+"-wrapper")&&n(t).unwrap()};r.prototype.addAttribute=function(t,i){return i.style!==null&&n(t).attr("style",i.style),i.class!==null&&n(t).addClass(i.class),i.attribute!==null&&(n.isArray(i.attribute)===!0?(n.isArray(i.attribute[0])!==!0&&(i.attribute[0]=[i.attribute[0],i.attribute[1]]),n.each(i.attribute,function(i,r){n(t).attr(r[0],r[1])})):n(t).attr(i.attribute)),t};r.prototype.insertAtCaret=function(t){var i=this,r;if(i.isSelectionOutsideOfEditor()===!0)return!1;i.getSelection()?(r=i.getSelection().getRangeAt(0),r.insertNode(t)):n(t).appendTo(i.elem)};r.prototype.isSelectionOutsideOfEditor=function(){return!this.elementContainsSelection(this.elem)};r.prototype.isOrContains=function(n,t){while(n){if(n===t)return!0;n=n.parentNode}return!1};r.prototype.elementContainsSelection=function(n){var f=this,r,u;if(i.getSelection){if(r=i.getSelection(),r.rangeCount>0){for(u=0;u<r.rangeCount;++u)if(!f.isOrContains(r.getRangeAt(u).commonAncestorContainer,n))return!1;return!0}}else if((r=t.selection)&&r.type!=="Control")return f.isOrContains(r.createRange().parentElement(),n);return!1};r.prototype.insertHtml=function(t){var i=this;n(i.elem).find("temp").html(t)};r.prototype.utils=function(){var i=this,r;n("html").on("click","."+i.className+"-modal-close",function(t){t.preventDefault();i.closeModal("#"+n(this).closest("."+i.className+"-modal").attr("id"))});if(n("."+i.randomString+"-bind").length>0)n("html").on("click keyup",i.elem,function(){var t=i.elem;clearTimeout(r);r=setTimeout(function(){n("."+i.randomString+"-bind").html(n(t).html())},250)});n(t).click(function(){n("."+i.className).closest("."+i.className+"-wrapper").find("."+i.className+"-toolbar > ul > li > ul").hide()})};r.prototype.getValue=function(){var i=this,r=n(i.elem).html(),t=n(i.elem).text(),u=t.length,f=t.trim().split(/\s+/).length;return{html:r,plainText:t,characterCount:u,wordCount:f}};r.prototype.enableCharacterLimit=function(){var t=this,i=t.characterLimit-t.getValue().characterCount;n(t.elem).after('<div class="'+t.className+"-character-remaining "+(i<=0?"is-invalid":"is-valid")+'">'+(t.characterLimitText?t.characterLimitText+" "+i:i)+"<\/div>");n("html").on("keyup",t.elem,function(){var u=t.getValue(),r=t.characterLimit-u.characterCount,i=n(t.containerClass).find('[class*="-character-remaining"]');t.characterLimitText?i.text(t.characterLimitText+" "+r):i.text(r);r<=0?i.removeClass("is-valid").addClass("is-invalid"):i.removeClass("is-invalid").addClass("is-valid")});n("html").on("keypress",t.elem,function(){var n=t.getValue();if(t.characterLimitPreventKeypress&&t.characterLimit<=n.characterCount)return!1})};r.prototype.getYoutubeVideoIdFromUrl=function(n){if(n.length===0)return!1;var t="";return n=n.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),n[2]!==undefined?(t=n[2].split(/[^0-9a-z_\-]/i),t=t[0]):t=n,t};r.prototype.openModal=function(i){var r=t.createElement("temp");r.textContent=".";this.insertAtCaret(r);n(i).removeClass("is-hidden")};r.prototype.closeModal=function(t){var r=this,i;n(t).addClass("is-hidden").find("input").val("");n(t).find("."+r.className+"-modal-content-body-loader").css("width","0");i=n(this.elem).find("temp");i.html()==="."?i.remove():i.contents().unwrap();n(this.elem).focus()};r.prototype.bold=function(){var n=this,t={buttonIdentifier:"bold",buttonHtml:"B",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"strong",keepHtml:!0})}};n.injectButton(t)};r.prototype.italic=function(){var n=this,t={buttonIdentifier:"italic",buttonHtml:"I",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"em",keepHtml:!0})}};n.injectButton(t)};r.prototype.h2=function(){var n=this,t={buttonIdentifier:"header-2",buttonHtml:"H2",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"h2",blockElement:!0})}};n.injectButton(t)};r.prototype.h3=function(){var n=this,t={buttonIdentifier:"header-3",buttonHtml:"H3",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"h3",blockElement:!0})}};n.injectButton(t)};r.prototype.h4=function(){var n=this,t={buttonIdentifier:"header-4",buttonHtml:"H4",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"h4",blockElement:!0})}};n.injectButton(t)};r.prototype.x=function(){var n=this,t={buttonIdentifier:"remove-formatting",buttonHtml:"x",clickHandler:function(){n.removeFormatting({inFullArea:!1})}};n.injectButton(t)};r.prototype.alignleft=function(){var n=this,t={buttonIdentifier:"align-left",buttonHtml:"Align left",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"p",style:"text-align: left","class":"text-left",keepHtml:!0})}};n.injectButton(t)};r.prototype.aligncenter=function(){var n=this,t={buttonIdentifier:"align-center",buttonHtml:"Align center",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"p",style:"text-align: center","class":"text-center",keepHtml:!0})}};n.injectButton(t)};r.prototype.alignright=function(){var n=this,t={buttonIdentifier:"align-right",buttonHtml:"Align right",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"p",style:"text-align: right","class":"text-right",keepHtml:!0})}};n.injectButton(t)};r.prototype.quote=function(){var n=this,t={buttonIdentifier:"quote",buttonHtml:"Quote",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"blockquote"})}};n.injectButton(t)};r.prototype.code=function(){var n=this,t={buttonIdentifier:"code",buttonHtml:"Code",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"pre"})}};n.injectButton(t)};r.prototype.link=function(){var n=this,t={buttonIdentifier:"link",buttonHtml:"Link",clickHandler:function(){n.wrapSelectionWithNodeName({nodeName:"a",attribute:["href",prompt("Insert link","")]})}};n.injectButton(t)};r.prototype.list=function(){var n=this,t={buttonIdentifier:"list",buttonHtml:"List",clickHandler:function(){n.wrapSelectionWithList()}};n.injectButton(t)};r.prototype.source=function(){var t=this,i={buttonIdentifier:"source",buttonHtml:"Source",clickHandler:function(i){var f=n(i).closest("."+t.className+"-wrapper"),r=f.find("."+t.className),u;if(n(i).hasClass("is-view-source-mode"))u=n("body > textarea."+t.className+"-temp"),r.css("visibility","visible"),u.remove(),n(i).removeClass("is-view-source-mode");else{n("body").append('<textarea class="'+t.className+'-temp" style="position: absolute; margin: 0;"><\/textarea>');u=n("body > textarea."+t.className+"-temp");u.css({top:r.offset().top,left:r.offset().left,width:r.outerWidth(),height:r.outerHeight()}).html(r.html());r.css("border")!==undefined&&u.css("border",r.css("border"));r.css("visibility","hidden");n(i).addClass("is-view-source-mode");u.on("keyup click change keypress",function(){r.html(n(this).val())})}}};t.injectButton(i)};i.EasyEditor=r;n.fn.easyEditor=function(t){return this.each(function(){n.data(this,"plugin_easyEditor")||n.data(this,"plugin_easyEditor",new r(this,t))})}})(jQuery,document,window);$(document).ready(function(){function n(){function t(t,i){if(!/\.(jpe?g|png|gif)$/i.test(i.name))return alert(i.name+" is not an image");var r=new FileReader;$(r).on("load",function(){n.append($("<img/>",{src:this.result,height:100,width:100}))});r.readAsDataURL(i)}var n=$("#preview").empty();this.files&&$.each(this.files,t)}$("#file-input").on("change",n)});$(document).ready(function(){$("#dataTable").DataTable({responsive:!0})});